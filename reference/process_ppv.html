<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Process Pre-Poll Voting Centre Data — process_ppv • scgElectionsAU</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Process Pre-Poll Voting Centre Data — process_ppv"><meta name="description" content="Standardises and transforms Pre-Poll Voting Centre (PPVC) data
for a single Australian federal election event into a consistent long-format structure. This
function aligns column names across election years (2010, 2013, 2016, 2019, 2022), pivots date-specific
vote counts into a long format (except for 2022), and converts issue dates to Date objects. For
unrecognised election years, the data is returned unprocessed with a message."><meta property="og:description" content="Standardises and transforms Pre-Poll Voting Centre (PPVC) data
for a single Australian federal election event into a consistent long-format structure. This
function aligns column names across election years (2010, 2013, 2016, 2019, 2022), pivots date-specific
vote counts into a long format (except for 2022), and converts issue dates to Date objects. For
unrecognised election years, the data is returned unprocessed with a message."><meta property="og:image" content="https://docs.sarahcgall.co.uk/scgElectionsAU/logo.png"></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">scgElectionsAU</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/aec-raw-data.html">A Guide to the AEC's Federal Election Raw Datasets</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sarahcgall/scgElectionsAU/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Process Pre-Poll Voting Centre Data</h1>
      <small class="dont-index">Source: <a href="https://github.com/sarahcgall/scgElectionsAU/blob/main/R/process_ppv.R" class="external-link"><code>R/process_ppv.R</code></a></small>
      <div class="d-none name"><code>process_ppv.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Standardises and transforms Pre-Poll Voting Centre (PPVC) data
for a single Australian federal election event into a consistent long-format structure. This
function aligns column names across election years (2010, 2013, 2016, 2019, 2022), pivots date-specific
vote counts into a long format (except for 2022), and converts issue dates to Date objects. For
unrecognised election years, the data is returned unprocessed with a message.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">process_ppv</span><span class="op">(</span><span class="va">data</span>, <span class="va">event</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame containing PPVC data for a single election event. Must include
an <code>event</code> column with a single unique value (e.g., "2010", "2013", "2016", "2019", "2022").
Additional required columns vary by year: <code>State</code>, <code>Division</code>, and date-specific vote columns
for 2010; <code>State</code>, <code>Division</code>, <code>m_pp_nm</code> for 2013; <code>m_state_ab</code>, <code>m_div_nm</code>, <code>m_pp_nm</code> for
2016 and 2019; <code>State</code>, <code>Division</code>, <code>PPVC</code>, <code>Issue Date</code>, <code>Total Votes</code> for 2022. A <code>date</code>
column is optional.</p></dd>


<dt id="arg-event">event<a class="anchor" aria-label="anchor" href="#arg-event"></a></dt>
<dd><p>A character string specifying the election event to process. Recognised values are
"2010 Federal Election", "2013 Federal Election", "2016 Federal Election", "2019 Federal Election",
or "2022 Federal Election". Other values result in the data being returned unprocessed.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame with standardised columns for recognised election years:</p><ul><li><p><code>date</code> (if present in the input)</p></li>
<li><p><code>event</code> (the election event)</p></li>
<li><p><code>StateAb</code> (state abbreviation)</p></li>
<li><p><code>DivisionNm</code> (division name)</p></li>
<li><p><code>PollingPlaceNm</code> (polling place name; included for 2013, 2016, 2019, and 2022 only)</p></li>
<li><p><code>IssueDate</code> (date of vote issuance as a Date object)</p></li>
<li><p><code>TotalVotes</code> (total votes issued on the corresponding issue date)</p></li>
</ul><p>For 2010–2019, the data is pivoted from wide to long format using date-specific vote columns.
For 2022, the data retains its original structure with renamed columns. For unrecognised years,
the original data frame is returned unchanged.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function processes PPVC data by:</p><ol><li><p>Standardising column names across recognised election years using <code>rename_cols()</code>:</p><ul><li><p>2010: <code>Division</code> to <code>DivisionNm</code>.</p></li>
<li><p>2013: “Division<code>to</code>DivisionNm`, `m_pp_nm` to `PollingPlaceNm`.</p></li>
<li><p>2016 and 2019: `m_state_ab` to `StateAb`, `m_div_nm` to `DivisionNm`, `m_pp_nm` to `PollingPlaceNm`.</p></li>
<li><p>2022: `Division` to `DivisionNm`, `PPVC` to `PollingPlaceNm`,
`Issue Date` to `IssueDate`, `Total Votes` to `TotalVotes`.</p></li>
</ul></li>
<li><p>For 2010: Filtering out rows with NA in `DivisionNm` (e.g., notes or totals).</p></li>
<li><p>For 2010–2019: Pivoting date-specific vote columns into long format with `pivot_event()`,
creating `IssueDate` and `TotalVotes` columns.</p></li>
<li><p>For 2022: Selecting standardised columns without pivoting.</p></li>
<li><p>Converting `IssueDate` to a Date object using year-specific formats:</p><ul><li><p>2022: "%d/%m/%y" (e.g., "09/05/22")</p></li>
<li><p>2019: "%d/%m/%Y" (e.g., "29/04/2019")</p></li>
<li><p>2016: "%Y-%m-%d" (e.g., "2016-06-14")</p></li>
<li><p>2013: "%d/%m/%Y" (e.g., "20/08/2013")</p></li>
<li><p>2010: "%d %b %y" (e.g., "02 Aug 10")</p></li>
</ul></li>
<li><p>For unrecognised years: Returning the data unprocessed with an informative message.</p></li>
</ol><p>The function assumes the input data frame contains the required columns for the specified `event`
year and that the `event` column has a single unique value matching the `event` argument.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Sample 2013 data (wide format)</span></span></span>
<span class="r-in"><span><span class="va">data_2013</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  date <span class="op">=</span> <span class="fl">2013</span><span class="op">-</span><span class="fl">09</span><span class="op">-</span><span class="fl">07</span>,</span></span>
<span class="r-in"><span>  event <span class="op">=</span> <span class="st">"2013 Federal Election"</span>,</span></span>
<span class="r-in"><span>  StateAb <span class="op">=</span> <span class="st">"NSW"</span>,</span></span>
<span class="r-in"><span>  DivisionNm <span class="op">=</span> <span class="st">"Sydney"</span>,</span></span>
<span class="r-in"><span>  m_pp_nm <span class="op">=</span> <span class="st">"Sydney PPVC"</span>,</span></span>
<span class="r-in"><span>  `20/08/2013` <span class="op">=</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span>  `21/08/2013` <span class="op">=</span> <span class="fl">150</span>,</span></span>
<span class="r-in"><span>  check.names <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">process_ppv</span><span class="op">(</span><span class="va">data_2013</span>, <span class="st">"2013 Federal Election"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Processing `2013 Federal Election` data to ensure all columns align across all elections.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   date                 event StateAb DivisionNm PollingPlaceNm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 1997 2013 Federal Election     NSW     Sydney    Sydney PPVC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 1997 2013 Federal Election     NSW     Sydney    Sydney PPVC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    IssueDate TotalPPVs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2013-08-20       100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 2013-08-21       150</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Sample 2022 data (long format)</span></span></span>
<span class="r-in"><span><span class="va">data_2022</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  date <span class="op">=</span> <span class="fl">2022</span><span class="op">-</span><span class="fl">05</span><span class="op">-</span><span class="fl">21</span>,</span></span>
<span class="r-in"><span>  event <span class="op">=</span> <span class="st">"2022 Federal Election"</span>,</span></span>
<span class="r-in"><span>  StateAb <span class="op">=</span> <span class="st">"VIC"</span>,</span></span>
<span class="r-in"><span>  DivisionNm <span class="op">=</span> <span class="st">"Melbourne"</span>,</span></span>
<span class="r-in"><span>  PPVC <span class="op">=</span> <span class="st">"Melbourne PPVC"</span>,</span></span>
<span class="r-in"><span>  `Issue Date` <span class="op">=</span> <span class="st">"09/05/22"</span>,</span></span>
<span class="r-in"><span>  `Total Votes` <span class="op">=</span> <span class="fl">200</span>,</span></span>
<span class="r-in"><span>  check.names <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">process_ppv</span><span class="op">(</span><span class="va">data_2022</span>, <span class="st">"2022 Federal Election"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Processing `2022 Federal Election` data to ensure all columns align across all elections.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   date                 event StateAb DivisionNm PollingPlaceNm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 1996 2022 Federal Election     VIC  Melbourne Melbourne PPVC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    IssueDate TotalPPVs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2022-05-09       200</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Sample invalid year</span></span></span>
<span class="r-in"><span><span class="va">data_2025</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>event <span class="op">=</span> <span class="st">"2025 Federal Election"</span>, StateAb <span class="op">=</span> <span class="st">"QLD"</span>, Votes <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">process_ppv</span><span class="op">(</span><span class="va">data_2025</span>, <span class="st">"2025 Federal Election"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> No processing required for `2025 Federal Election`. Data returned unprocessed.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   event StateAb Votes</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2025 Federal Election     QLD   100</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.sarahcgall.co.uk/" class="external-link">Sarah Gall</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer></body></html>

